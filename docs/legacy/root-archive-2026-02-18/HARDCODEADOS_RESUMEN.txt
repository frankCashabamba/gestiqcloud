â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    ANÃLISIS DE HARDCODEADOS - RESUMEN EJECUTIVO              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ESTADÃSTICAS GENERALES
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Total de Hardcodeados Identificados: 50+
  ğŸ”´ CrÃ­ticos: 11
  ğŸŸ  Alto Riesgo: 7  
  ğŸŸ¡ Medio Riesgo: 6

DistribuciÃ³n:
  Frontend (TypeScript): 25+ instancias
  Backend (Python): 15+ instancias
  Scripts: 3+ instancias
  DocumentaciÃ³n: 5+ referencias

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ”´ CRÃTICOS - Requieren acciÃ³n inmediata
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. DEFAULT_ID_TYPES = ['CEDULA', 'RUC', 'PASSPORT']
   ğŸ“ UbicaciÃ³n: apps/tenant/src/modules/pos/POSView.tsx:105
   âš ï¸  Riesgo: Array fijo, no soporta otros paÃ­ses ni tipos
   âœ… SoluciÃ³n: API endpoint + BD configurables

2. Payment Methods Enum (CASH, CARD, TRANSFER, ...)
   ğŸ“ UbicaciÃ³n: apps/backend/app/models/core/payment.py:17-28
   âš ï¸  Riesgo: Hardcodeado en cÃ³digo, redeploy para cambios
   âœ… SoluciÃ³n: Tabla BD + Enum dinÃ¡mico

3. CRM Enums (LeadStatus, OpportunityStage, ActivityType)
   ğŸ“ UbicaciÃ³n: apps/tenant/src/modules/crm/types.ts
   âš ï¸  Riesgo: Estados de venta fijos, no personalizables
   âœ… SoluciÃ³n: Configurables por tenant en BD

4. Transaction Types (RECEIPT, TRANSFER, CARD, ...)
   ğŸ“ UbicaciÃ³n: apps/backend/app/models/core/facturacion.py:143-159
   âš ï¸  Riesgo: Tipos de transacciÃ³n sin flexibilidad
   âœ… SoluciÃ³n: Tabla BD con tipos personalizables

5. Defaults Globales (USD, America/Guayaquil, 0% tax)
   ğŸ“ UbicaciÃ³n: apps/tenant/src/constants/defaults.ts
   âš ï¸  Riesgo: ConfiguraciÃ³n fija para un paÃ­s/regiÃ³n
   âœ… SoluciÃ³n: tenant_config BD por tenant

6-11. URLs Hardcodeadas:
   - Credenciales DB (alembic/.env.example)
   - JWT Secrets (alembic/.env.example)
   - Redis localhost (celery_config.py)
   - Payphone URLs (payphone_provider.py)
   - Kushki URLs (kushki_provider.py)
   - SRI Endpoints (einvoicing_tasks.py)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸŸ  ALTO RIESGO - Importante resolver en prÃ³ximas semanas
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. OCR Keywords (Solo espaÃ±ol, heurÃ­sticas fijas)
   ğŸ“ UbicaciÃ³n: apps/tenant/src/modules/importer/utils/detectarTipoDocumento.ts
   âš ï¸  Riesgo: No soporta otros idiomas
   âœ… SoluciÃ³n: Tabla ocr_keywords configurables

2. API Localhost Fallbacks
   ğŸ“ UbicaciÃ³n: vite.config.ts, wrangler.toml
   âš ï¸  Riesgo: Dev values pueden filtrarse a prod
   âœ… SoluciÃ³n: Eliminar fallbacks, env vars obligatorias

3. Servicios Externos (Ollama, OpenAI, Telegram)
   âš ï¸  Riesgo: URLs hardcodeadas, no parametrizables
   âœ… SoluciÃ³n: external_integrations BD + API

4. SUPPORTED_LANGS = ['en', 'es']
   ğŸ“ UbicaciÃ³n: apps/tenant/src/i18n/index.ts
   âš ï¸  Riesgo: Solo 2 idiomas, no extensible
   âœ… SoluciÃ³n: Configurables por tenant

5. ConfiguraciÃ³n POS (Print, Poll Intervals)
   âš ï¸  Riesgo: Intervalos y timeouts fijos
   âœ… SoluciÃ³n: Env vars + BD config

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ IMPACTO EN PRODUCCIÃ“N
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Riesgos Inmediatos:
  âŒ ContraseÃ±a "root" en cÃ³digo ejemplo
  âŒ JWT secrets sin aleatorizar
  âŒ Redis apunta a localhost en prod
  âŒ URLs de pago hardcodeadas en cÃ³digo

Riesgos a Mediano Plazo:
  âš ï¸  No soporta multi-paÃ­s
  âš ï¸  No soporta multi-idioma
  âš ï¸  Tipos de documento no flexibles
  âš ï¸  MÃ©todos de pago no extensibles
  âš ï¸  Flujos CRM no personalizables

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â±ï¸ TIMELINE ESTIMADO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Fase 1 (Semana 1): Enums de Negocio
  â€¢ Payment Methods Enum â†’ BD    [1-2 dÃ­as]
  â€¢ Transaction Types â†’ BD       [1 dÃ­a]
  Esfuerzo: 2-3 dÃ­as

Fase 2 (Semana 1-2): ConfiguraciÃ³n Global
  â€¢ Tabla tenant_config          [2-3 dÃ­as]
  Esfuerzo: 2-3 dÃ­as

Fase 3 (Semana 2): Documentos & IDs
  â€¢ document_id_types BD         [2 dÃ­as]
  â€¢ document_types BD            [1 dÃ­a]
  Esfuerzo: 2-3 dÃ­as

Fase 4 (Semana 2-3): Integraciones Externas
  â€¢ external_integrations BD     [3-4 dÃ­as]
  Esfuerzo: 3-4 dÃ­as

Fase 5 (Semana 3): OCR & i18n
  â€¢ ocr_keywords BD              [1-2 dÃ­as]
  Esfuerzo: 1-2 dÃ­as

Fase 6 (Semana 3): Refactor Frontend
  â€¢ Reemplazar hardcodeados      [1-2 dÃ­as]
  Esfuerzo: 1-2 dÃ­as

TOTAL: 12-19 dÃ­as (~3 semanas)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… PRÃ“XIMOS PASOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

IMMEDIATE (Esta semana):
  1. Leer documentos de anÃ¡lisis
     - ANALISIS_HARDCODEADOS.md
     - HARDCODEADOS_IMPLEMENTACION_RAPIDA.md
  
  2. Validar env vars obligatorias en startup
  
  3. Crear .env.example con TODAS las variables requeridas

SEMANA 1:
  1. Crear migraciones para nuevas tablas
  2. Implementar API endpoints
  3. Seed data inicial

SEMANA 2:
  1. Refactor frontend para usar APIs
  2. Reemplazar enums por fetch dinÃ¡mico
  3. Testing integraciÃ³n

SEMANA 3:
  1. ValidaciÃ³n en ambiente staging
  2. Rollback plan si es necesario
  3. DocumentaciÃ³n final

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“š DOCUMENTACIÃ“N GENERADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. ANALISIS_HARDCODEADOS.md
   âœ“ AnÃ¡lisis completo con detalles de cada hardcodeado
   âœ“ CategorizaciÃ³n por riesgo
   âœ“ Plan de remediaciÃ³n por fases
   
2. HARDCODEADOS_IMPLEMENTACION_RAPIDA.md
   âœ“ Code snippets listos para implementar
   âœ“ Ejemplos backend (Python)
   âœ“ Ejemplos frontend (TypeScript)
   âœ“ Migraciones SQL
   âœ“ Seed data
   
3. HARDCODEADOS_RESUMEN.txt (este archivo)
   âœ“ Resumen ejecutivo
   âœ“ EstadÃ­sticas
   âœ“ Timeline
   âœ“ PrÃ³ximos pasos

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Generado: 2026-02-18
