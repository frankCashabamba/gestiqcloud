# ============================================================================
# GESTIQCLOUD ENVIRONMENT VARIABLES
# ============================================================================
# Copy this file to .env and update values for your environment
# 
# SECURITY: Never commit actual .env files with secrets to git
# Use .env.local (ignored by git) for development secrets
# ============================================================================

# ============================================================================
# BACKEND (FastAPI)
# ============================================================================

# Database
DATABASE_URL=postgresql://user:password@localhost:5432/gestiqcloud
# Alternative: sqlite:///./gestiqcloud.db (development only)

# Security
SECRET_KEY=your-secret-key-min-32-chars-change-in-production
JWT_SECRET_KEY=your-jwt-secret-key-min-32-chars-change-in-production

# Environment
ENV=development
# Options: development, staging, production

# CORS (REQUIRED in production - NO localhost allowed)
# For development, can use localhost IPs
CORS_ORIGINS=http://localhost:5173,http://localhost:5174,http://localhost:8081,http://localhost:8082
# Example production: https://www.gestiqcloud.com,https://admin.gestiqcloud.com
# In production, this MUST be configured or app will not start

# Email / SMTP (REQUIRED in production)
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_USE_TLS=true
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
# IMPORTANT: DEFAULT_FROM_EMAIL is REQUIRED in production (no default fallback)
# Must be a valid email address (e.g., noreply@gestiqcloud.com)
DEFAULT_FROM_EMAIL=noreply@gestiqcloud.com
# DEFAULT_FROM_EMAIL="" would require setting it via env var

# Password Reset
PASSWORD_RESET_URL_BASE=https://www.gestiqcloud.com/reset-password

# Redis (REQUIRED in production - NO localhost allowed)
# For development, localhost is OK. In production, must use external Redis
REDIS_URL=redis://localhost:6379/0
# Production example: REDIS_URL=redis://cache.internal:6379/1
REDIS_RESULT_URL=redis://localhost:6379/1
# In production: REDIS_RESULT_URL=redis://cache.internal:6379/1

# AI Configuration
IMPORT_AI_PROVIDER=local
# Options: local, openai, azure
IMPORT_AI_CONFIDENCE_THRESHOLD=0.7
IMPORT_AI_CACHE_ENABLED=true

# OpenAI (if IMPORT_AI_PROVIDER=openai)
OPENAI_API_KEY=sk-...
OPENAI_MODEL=gpt-3.5-turbo

# Azure OpenAI (if IMPORT_AI_PROVIDER=azure)
AZURE_OPENAI_KEY=your-key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com

# Certificate Passwords for E-invoicing
# Format: CERT_PASSWORD_<TENANT_ID>_<COUNTRY>
# Example for tenant "acme-corp" in Ecuador:
CERT_PASSWORD_acme-corp_ECU=your-cert-password-here
CERT_PASSWORD_acme-corp_ESP=your-cert-password-here

# AWS Configuration (if using AWS Secrets Manager for certificates)
AWS_REGION=us-east-1
# AWS credentials are usually handled by IAM roles in production

# ============================================================================
# FRONTEND - TENANT APP
# ============================================================================

VITE_API_URL=http://localhost:8000
VITE_API_SUFFIX=/api/v1
VITE_TENANT_ORIGIN=http://localhost:8082
VITE_ADMIN_ORIGIN=http://localhost:8081

# ElectricSQL (offline-first sync)
VITE_ELECTRIC_ENABLED=0
# Enable only if ElectricSQL is set up
VITE_ELECTRIC_URL=ws://localhost:5133

# Optional: Build/base path
VITE_BASE_PATH=/
VITE_BUILD_ID=dev

# ============================================================================
# FRONTEND - ADMIN APP
# ============================================================================

VITE_API_URL=http://localhost:8000
VITE_API_SUFFIX=/api/v1
VITE_ADMIN_ORIGIN=http://localhost:8081
VITE_TENANT_ORIGIN=http://localhost:8082

# ============================================================================
# CLOUDFLARE WORKER
# ============================================================================
# These are usually set via wrangler.toml [vars], but can be overridden here

TARGET=https://gestiqcloud-api.onrender.com
ALLOWED_ORIGINS=https://www.gestiqcloud.com,https://admin.gestiqcloud.com
COOKIE_DOMAIN=.gestiqcloud.com
HSTS_ENABLED=1
API_VERSION=1.0.0

# ============================================================================
# LEGACY / DEPRECATED
# ============================================================================
# These settings control sunset of legacy endpoints

LEGACY_SUNSET=Wed, 31 Dec 2025 00:00:00 GMT
LEGACY_DEPRECATION_LINK=https://docs.example.com/changelog#legacy

# ============================================================================
# DOCKER / INFRASTRUCTURE
# ============================================================================

DOCKER_BUILDKIT=1
COMPOSE_DOCKER_CLI_BUILD=1
